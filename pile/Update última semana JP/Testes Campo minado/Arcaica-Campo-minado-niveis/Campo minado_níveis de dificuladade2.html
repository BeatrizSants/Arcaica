<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Campo Minado</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
        }

        .game-board {
            display: grid;
            gap: 1px;
            background-color: #333;
        }

        .cell {
            background-color: #ccc;
            border: 1px solid #999;
            text-align: center;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px; /* Ajuste o tamanho da fonte conforme necess√°rio */
        }


        .cell.revealed {
            background-color: #ddd;
        }

        .cell.bomb {
            background-color: red;
            color: white;
        }
    </style>
</head>
<body>
    <h1>Campo Minado</h1>
    <!-- Adicionado um seletor de n√≠vel de dificuldade -->
    <label for="difficulty-level">N√≠vel de Dificuldade:</label>
    <select id="difficulty-level">
        <option value="easy">F√°cil</option>
        <option value="medium">M√©dio</option>
        <option value="hard">Dif√≠cil</option>
    </select>
    <button id="reset-button" class="reset-button">Reiniciar Jogo</button>
    <div id="board" class="game-board"></div>
    
    <script>
        const board = document.getElementById("board");
        const resetButton = document.getElementById("reset-button");
        const difficultyLevel = document.getElementById("difficulty-level");

        let size, minesCount;
        let mines = new Set();

        // Defini√ß√£o dos n√≠veis de dificuldade com tamanhos e n√∫meros de minas
        const levels = {
            easy: { size: 8, minesCount: 10 },
            medium: { size: 12, minesCount: 20 },
            hard: { size: 16, minesCount: 40 }
        };

        // Fun√ß√£o para criar o tabuleiro do jogo
        function createBoard() {
            const level = levels[difficultyLevel.value];  // Obt√©m os par√¢metros do n√≠vel selecionado
            size = level.size;
            minesCount = level.minesCount;

            board.innerHTML = "";
            mines.clear();

            // Colocar minas em posi√ß√µes aleat√≥rias
            while (mines.size < minesCount) {
                const randomPosition = Math.floor(Math.random() * (size * size));
                mines.add(randomPosition);
            }

            // Criar as c√©lulas do tabuleiro
            for (let i = 0; i < size * size; i++) {
                const cell = document.createElement("div");
                cell.className = "cell";
                cell.addEventListener("click", revealCell);
                cell.addEventListener("contextmenu", markCell);
                board.appendChild(cell);
            }

            board.style.gridTemplateColumns = `repeat(${size}, 50px)`;
            board.style.gridTemplateRows = `repeat(${size}, 50px)`;
        }

        // Fun√ß√£o para revelar uma c√©lula
        function revealCell(event) {
            const cell = event.target;
            const index = Array.from(board.children).indexOf(cell);

            if (cell.classList.contains("revealed")) {
                return; 
            }

            if (mines.has(index)) {
                cell.textContent = "üí£"; 
                cell.classList.add("bomb"); 
                alert("Game Over! Voc√™ encontrou uma bomba.");
                return;
            }

            const adjacentIndices = getAdjacentIndices(index);
            const adjacentMinesCount = adjacentIndices.filter(i => mines.has(i)).length;

            cell.textContent = adjacentMinesCount;
            cell.classList.add("revealed");

            if (adjacentMinesCount === 0) {
                adjacentIndices.forEach(i => {
                    if (!board.children[i].classList.contains("revealed")) {
                        revealCell({ target: board.children[i] });
                    }
                });
            }
        }

        // Fun√ß√£o para marcar uma c√©lula com uma bandeira
        function markCell(event) {
            event.preventDefault();
            const cell = event.target;

            if (cell.classList.contains("revealed")) {
                return; 
            }

            if (cell.textContent === "üö©") {
                cell.textContent = ""; 
            } else {
                cell.textContent = "üö©"; 
            }
        }

        // Fun√ß√£o para obter √≠ndices adjacentes
        function getAdjacentIndices(index) {
            const row = Math.floor(index / size);
            const col = index % size;
            const adjacent = [];

            for (let i = -1; i <= 1; i++) {
                for (let j = -1; j <= 1; j++) {
                    if (i === 0 && j === 0) continue; 
                    const r = row + i;
                    const c = col + j;
                    if (r >= 0 && r < size && c >= 0 && c < size) {
                        adjacent.push(r * size + c);
                    }
                }
            }

            return adjacent;
        }

        // Fun√ß√£o para reiniciar o jogo
        function resetGame() {
            createBoard(); 
        }

        // Criar o tabuleiro ao carregar a p√°gina
        createBoard();  
        
        // Adicionar evento de clique para o bot√£o de reiniciar
        resetButton.addEventListener("click", resetGame);
        // Adicionar evento de mudan√ßa para o seletor de n√≠vel de dificuldade
        difficultyLevel.addEventListener("change", resetGame);
    </script>
</body>
</html>
